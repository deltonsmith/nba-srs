<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NBA Power Rankings (SRS)</title>
<link rel="stylesheet" href="./style.css" />
<body>
<header>
  <h1>NBA Power Rankings (SRS)</h1>
  <div id="updated"></div>
</header>
<table id="tbl">
  <thead><tr>
    <th>Rank</th><th>Team</th><th>SRS</th><th>Record</th>
    <th>SOS</th><th>Last 10</th><th>Last game</th>
  </tr></thead>
  <tbody></tbody>
</table>
<script>
(async function(){
  const res = await fetch('./api/rankings.json', {cache:'no-store'});
  const data = await res.json();
  const tbody = document.querySelector('#tbl tbody');
  document.querySelector('#updated').textContent =
    'Updated ' + (data[0]?.updated_at || '');
  for (const t of data) {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${t.rank}</td>
      <td>${t.team}</td>
      <td>${t.srs.toFixed(2)}</td>
      <td>${t.record}</td>
      <td>${t.sos.toFixed(2)}</td>
      <td>${t.last10}</td>
      <td>${t.last_game}</td>`;
    tbody.appendChild(tr);
  }
})();
</script>
</body>
</html>
